{%- comment -%}theme-check-disable LiquidTag, NestedSnippet, TemplateLength{%- endcomment -%}
{%- comment -%}Build: bg-info-bg text-info-text{%- endcomment -%}
{{ 'product.css' | asset_url | stylesheet_tag }}
{{ 'product-page.css' | asset_url | stylesheet_tag }}
{{ 'main-product.css' | asset_url | stylesheet_tag }}
{{ 'popup.css' | asset_url | stylesheet_tag }}

{%- assign messages = section.blocks | where: 'type', 'message' -%}
{%- if messages -%}
  <script src="{{ 'product-message.js' | asset_url }}" defer="defer"></script>
  {{ 'product-message.css' | asset_url | stylesheet_tag }}
{%- endif -%}

{%- if product.metafields.spr.reviews -%}
  {{ 'reviews.css' | asset_url | stylesheet_tag }}
{%- endif -%}

{%- if product.media.size > 0 -%}
  <link rel="stylesheet" href="{{ 'media-gallery.css' | asset_url }}">
{%- endif -%}

{%- if product.metafields.reviews.rating.value != blank -%}
  <script>
    document.addEventListener(
      'DOMContentLoaded',
      () => {
        if (document.getElementById('shopify-product-reviews')) {
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = "{{ 'reviews.css' | asset_url }}";
          document.body.appendChild(link);
        }
      },
      { once: true }
    );
  </script>
{%- endif -%}

<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

{%- liquid
  # constants
  assign breakpoint_md = 769
  assign breakpoint_lg = 1024

  assign product_form_id = 'product-form-' | append: section.id
  assign current_variant = product.selected_or_first_available_variant
  assign first_3d_model = product.media | where: 'media_type', 'model' | first
  assign media_ratio = section.settings.media_ratio
  assign thumb_ratio = section.settings.thumb_ratio

  if media_ratio == 'natural'
    assign media_ratio = 99
    for media in product.media
      if media.preview_image.aspect_ratio < media_ratio
        assign media_ratio = media.preview_image.aspect_ratio
      endif
    endfor
  endif

  if thumb_ratio == 'natural'
    assign thumb_ratio = 99
    for media in product.media
      if media.preview_image.aspect_ratio < thumb_ratio
        assign thumb_ratio = media.preview_image.aspect_ratio
      endif
    endfor
  endif

  assign custom_popup_active = false
  if product.metafields.custom.enable_preorder or product.metafields.custom.enable_waitlist or product.metafields.custom.enable_upcoming
    assign custom_popup_active = true
  endif
-%}

{%- style -%}
  {%- if section.settings.media_layout == 'stacked' -%}
    @media (max-width:  {{ breakpoint_md | minus: 0.02 }}px) {
      .media-gallery__main .media-xr-button { display: none; }
      .active .media-xr-button:not([data-shopify-xr-hidden]) { display: block; }
    }
  {%- else -%}
    .media-gallery__main .media-xr-button { display: none; }
    .active .media-xr-button:not([data-shopify-xr-hidden]) { display: block; }
  {%- endif -%}

  {%- if section.settings.media_size == 'large' -%}
    @media (min-width: {{ breakpoint_lg }}px) {
      :root { --product-info-width: 400px !important; }
    }
  {%- endif -%}
{%- endstyle -%}

<style>
    html {
      scroll-behavior: smooth;
    }

    /* 1. Styling the Questions Box */
    .product-questions-box {
      border: 1px solid #e2e2e2;
      padding: 15px;
      border-radius: 5px;
      background-color: #fff;
      margin-top: 24px;
    }

    /* 2. Desktop 3-Column Layout */
    @media (min-width: 1024px) {
      .product.js-product {
        display: grid !important;

        /* THE KEY CHANGE IS HERE: */
        /* Left (Images): Reduced to 42% (was 48%) */
        /* Middle (Info): 1fr (Takes whatever is left) */
        /* Right (Sidebar): Fixed at 300px */
        grid-template-columns: 34% 34% 22% !important;
        gap: 60px;
        align-items: start !important; /* Forces all columns to top-align */
      }

      /* Override Theme Limits on Middle Column */
      .product-info {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding-top: calc(15 * var(--space-unit)) !important;
      }

      /* Sidebar Positioning */
      .product-sidebar {
        display: block !important;
        width: 100% !important;
        margin-top: 0 !important;
        align-self: stretch;
        padding-top: calc(15 * var(--space-unit)) !important;
        padding-bottom: calc(15 * var(--space-unit)) !important;
      }

      .product-questions-box {
        margin-top: 0;
        position: sticky;
        top: 80px !important;
      }

      /* Safety: Hide sidebar in mobile/tablet views (handled by main liquid logic) */
      .product-info .product-questions-box {
        display: none !important;
      }
    }

    /* 3. Tablet/Small Laptop Adjustment (1024px - 1300px) */
    /* On smaller screens, 3 columns is too crowded. Revert to 2 columns. */
    @media (min-width: 1024px) and (max-width: 1300px) {
      .product.js-product {
        grid-template-columns: 50% 1fr !important;
      }
      /* Hide the sidebar column */
      .product-sidebar {
        display: none !important;
      }
      /* Show the box inside the main info column instead */
      .product-info .product-questions-box {
        display: block !important;
      }
    }

    {% comment %} @media screen and (max-width: 768px) {
      .product-sidebar {
        margin-top: 40px;
      }
    } {% endcomment %}

    /* 4. Mobile: turn Questions Box into sticky bottom bar */
    @media screen and (max-width: 768px) {

      /* Give room so content doesn't hide behind the sticky bar */
      {% comment %} body {
        padding-bottom: 90px;
      } {% endcomment %}

      /* Make the questions box itself stick to the bottom */
      .product-questions-box {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        margin: 0;
        border-radius: 0;
        border-left: none;
        border-right: none;
        padding: 15px 12px 25px;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.12);
        z-index: 9999;
      }

      /* üî• Hide heading + image + product title + OR line on mobile */
      .product-questions-box > h3,
      .product-questions-box .flex.items-start.mb-6,
      .product-questions-box .or-separator {
        display: none !important;
      }

      /* We don't need the heading, product image, or OR separator in the sticky bar */
      .product-questions-box > h3,
      .product-questions-box > .flex,
      .product-questions-box .or-separator {
        display: none;
      }

      /* Make the 3 actions sit in a row */
      .product-questions-box .grid {
        display: flex !important;
        gap: 8px;
      }

      .product-questions-box .grid > a,
      .product-questions-box .grid > button {
        flex: 1 1 0;
        white-space: nowrap;
      }

      /* Sidebar container itself doesn't need margin anymore */
      .product-sidebar {
        margin-top: 0;
      }
    }


    /* Hide LiveChat minimized bubble on product pages only */
    #chat-widget-minimized {
      display: none !important;
    }

    .product-info__block.product-questions-box h3 {
      font-weight: 500;
      font-size: 21px;
      line-height: 32px;
    }

    button.extra-atc-btn {
      {% comment %} width: 100%; {% endcomment %}
      border-radius: 5px;
      {% comment %} background-color: #1b413e; {% endcomment %}
      border: 1px solid #222120;
      background: #FFFFFF;
      color: #222120;
      padding: 10px 0px;
      font-size: 16px;
      font-weight: 500;
    }

    button.extra-atc-btn:hover {
      background: #1F8A81;
      border: 1px solid #1F8A81;
      color: #FFFFFF;
      transition: none;
    }

    a.js-open-livechat {
      {% comment %} background-color: #ffffff !important; {% endcomment %}
      color: #FFFFFF !important;
      border: 1px solid #1B413E;
      background: #1B413E;
      border-radius: 5px;
      padding: 10px 0px;
      font-size: 16px;
      font-weight: 500;
    }

    a.js-open-livechat:hover {
      background: #1F8A81;
      border: 1px solid #1F8A81 ;
      color: #FFFFFF;
      transition: none;
    }
    a.send-us-email {
      color: #222120;
      border: 1px solid #222120;
      background: #FFFFFF;
      border-radius: 5px;
      padding: 10px 0px;
      font-size: 16px;
      font-weight: 500;
    }

    a.send-us-email:hover {
      background: #1F8A81;
      border: 1px solid #1F8A81;
      color: #FFFFFF;
      transition: none;
    }

    .or-separator {
      display: flex;
      align-items: center;      /* centers OR vertically between lines */
      justify-content: center;  /* ensures both sides stretch evenly */
      gap: 12px;                /* spacing between line and OR */
      width: 100%;
    }

    .or-separator hr {
      flex: 1;                  /* makes both lines equal length */
      margin: 0;                /* removes default HR margins */
      border: none;             /* remove default border */
      border-top: 1px solid #bdbdbd; /* subtle grey line like screenshot */
    }

    .or-separator p {
      margin: 0;
      font-weight: 500;
      font-size: 15px;
      color: #333;              /* match screenshot text color */
    }

  .product-questions-box a.js-open-livechat .chat-icon {
    display: none;
  }

  @media (max-width: 768px) {
    /* Sticky container you already have */
    .product-questions-box .grid {
      display: flex !important;
      gap: 8px;
    }

    .product-questions-box .grid > a,
    .product-questions-box .grid > button {
      width: auto;
      outline: none;
      box-shadow: none;
    }

    /* 1) Icon-only chat button ‚Äì DEFAULT (white + grey icon) */
    .product-questions-box a.js-open-livechat {
      flex: 0 0 44px;
      height: 44px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;

      border-radius: 6px;
      border: 1px solid #A6A6A6;
      background-color: #FFFFFF;
    }

    .product-questions-box a.js-open-livechat .chat-icon {
      width: 20px;
      height: 20px;
      display: block;
      color: #222120; /* grey icon */
    }

    /* üîÅ TOGGLED STATE (green + white icon) */
    .product-questions-box a.js-open-livechat.chat-open {
      border-color: #1B8A81;
      background-color: #1B8A81;
    }

    .product-questions-box a.js-open-livechat.chat-open .chat-icon {
      color: #FFFFFF;
    }

    .talk-to-live-agent-label {
      display: none;
    }

    /* (remove the hover rule ‚Äì we don't need it anymore)
    .product-questions-box a.js-open-livechat .chat-icon:hover { ... }
    */

    /* 2) Email button ‚Äì outline */
    .product-questions-box a.send-us-email {
      flex: 1 1 0;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;

      border-radius: 6px;
      border: 1px solid #1B8A81;
      background-color: #FFFFFF;
      color: #1B8A81 !important;
      font-size: 14px;
      font-weight: 500;
    }

    .product-questions-box a.send-us-email:focus,
    .product-questions-box a.send-us-email:active,
    .product-questions-box a.send-us-email:hover {
      background-color: #1B8A81;
      border-color: #1B8A81;
      color: #FFFFFF !important;
    }

    /* 3) Add to cart ‚Äì solid */
    .product-questions-box button.extra-atc-btn {
      flex: 1 1 0;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;

      border-radius: 6px;
      border: 1px solid #1B8A81;
      background-color: #1B8A81;
      color: #FFFFFF;
      font-size: 14px;
      font-weight: 500;
    }

    .product-questions-box button.extra-atc-btn:focus,
    .product-questions-box button.extra-atc-btn:active,
    .product-questions-box button.extra-atc-btn:hover {
      background-color: #186f69;
      border-color: #186f69;
      color: #FFFFFF;
    }

    .media-gallery__thumbs.no-js-hidden {
      display: none;
    }

    .product-sidebar .product-info__price,
    .product-sidebar .product-info__price + hr {
      display: none;
    }

    .icon-with-text.icon-with-text--horizontal.list-unstyled.content-container {
      margin-bottom: 40px;
    }
  }

  {% comment %} .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  } {% endcomment %}
</style>

{%- if product.metafields.custom.enable_upcoming == true -%}
  <style>
    /* 1. Hide Standard Theme Prices */
    .product-info__price,
    .product-sidebar .product-info__price,
    .sticky-atc-panel .price,
    .product-info__price + hr {
      display: none !important;
    }

    /* 2. Hide Globo-Specific Prices in custom cards */
    .card-price-section,
    .card-free-badge {
      display: none !important;
    }

    /* 3. Hide Affirm/Truemed (Payment/Financing messages) */
    .product-info__pay,
    #truemed-prequalify,
    .affirm-as-low-as {
      display: none !important;
    }

    /* 4. Hide original GPO price elements if they leak through */
    .gpo-tooltip__price,
    .gpo-price-addon {
      display: none !important;
    }
  </style>
{%- endif -%}

{%- if first_3d_model -%}
  <link
    rel="stylesheet"
    href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
    media="print"
    onload="this.media='all'"
  >
  <link rel="stylesheet" href="{{ 'model-viewer.css' | asset_url }}" media="print" onload="this.media='all'">
  <script src="{{ 'product-model.js' | asset_url }}" defer></script>
{%- endif -%}
<div class="main-product-wrapper">
  <div class="container">
    <div class="product js-product" data-section="{{ section.id }}">
      <div id="product-media" class="product-media product-media--{{ section.settings.media_layout }}">
        <!-- <div class="product-media-inner"> -->
        {%- if product.media.size > 0 -%}
          {% render 'media-gallery',
            product: product,
            current_variant: current_variant,
            media_ratio: media_ratio,
            media_crop: section.settings.media_crop,
            thumb_ratio: thumb_ratio,
            thumb_crop: section.settings.thumb_crop,
            first_3d_model: first_3d_model,
            zoom: section.settings.hover_zoom
          %}
        {%- else -%}
          <div class="media relative">
            {{ 'image' | placeholder_svg_tag: 'media__placeholder' }}
          </div>
        {%- endif -%}
        <!-- </div> -->
        {% comment %}
          <div class="product-media-info">
            {%- for block in section.blocks -%}
              {%- case block.type -%}
                {%- when '@app' -%}
                  <div class="product-info__block product-info__block--sm" {{ block.shopify_attributes }}>
                    <h1>{{ block.type }}</h1>
                    {% render block %}
                  </div>
              {% endcase %}
            {% endfor %}
          </div>
        {% endcomment %}
      </div>

      <div
        class="product-info{% if section.settings.stick_on_scroll %} product-info--sticky{% endif %}"
        {% if section.settings.stick_on_scroll %}
          data-sticky-height-elems="#product-media,.cc-main-product + .cc-product-details .container"
        {% endif %}
      >
        {%- if section.settings.stick_on_scroll -%}
          <script src="{{ 'sticky-scroll-direction.js' | asset_url }}" defer="defer"></script>
          <sticky-scroll-direction data-min-sticky-size="md">
            <div class="product-info__sticky">
        {%- endif -%}

        {%- assign has_variant_picker = false -%}
        {%- if section.settings.sticky_atc_panel -%}
          <a class="product-options--anchor" id="product-info" rel="nofollow"></a>
        {%- endif -%}

        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when '@app' -%}
              <div class="product-info__block product-info__block--sm" {{ block.shopify_attributes }}>
                {% render block %}
              </div>

            {%- when 'vendor-sku' -%}
              {%- if block.settings.show_vendor or block.settings.show_sku or block.settings.show_barcode -%}
                <div
                  class="product-info__block product-info__block--sm product-vendor-sku text-sm"
                  {{ block.shopify_attributes }}
                >
                  {%- if block.settings.show_vendor and product.vendor != blank -%}
                    {%- liquid
                      assign vendor_handle = product.vendor | handle
                      if collections[vendor_handle].handle == vendor_handle
                        assign vendor_url = collections[vendor_handle].url
                      else
                        assign vendor_url = product.vendor | url_for_vendor
                      endif
                    -%}
                    <span class="product-vendor">{{ product.vendor | link_to: vendor_url }}</span>
                  {%- endif -%}

                  {%- if block.settings.show_sku -%}
                    <span
                      class="product-sku"
                      {% if current_variant.sku == blank %}
                        hidden
                      {% endif %}
                    >
                      {%- if block.settings.show_vendor and product.vendor != blank %} &nbsp;|&nbsp; {% endif -%}
                      <span>{{ 'products.product.sku' | t }}</span>
                      <span class="product-sku__value">{{ current_variant.sku }}</span>
                    </span>
                  {%- endif -%}

                  {%- if block.settings.show_barcode -%}
                    <span
                      class="product-info__barcode"
                      {% if current_variant.barcode == blank %}
                        hidden
                      {% endif %}
                    >
                      {%- if block.settings.show_vendor or block.settings.show_sku %} &nbsp;|&nbsp; {% endif -%}
                      <span>{{ 'products.product.barcode' | t }}</span>
                      <span class="product-info__barcode-value">
                        {%- if current_variant.barcode %}{{ current_variant.barcode }}{% endif -%}
                      </span>
                    </span>
                  {%- endif -%}
                </div>
              {%- endif -%}

            {%- when 'type' -%}
              {%- if product.type != blank -%}
                <div class="product-info__block product-info__block--sm text-sm" {{ block.shopify_attributes }}>
                  {%- liquid
                    assign product_type_handle = product.type | handle
                    if collections[product_type_handle].handle == product_type_handle
                      assign type_url = collections[product_type_handle].url
                    else
                      assign type_url = product.type | url_for_type
                    endif
                  -%}
                  {{ product.type | link_to: type_url }}
                </div>
              {%- endif -%}

            {%- when 'star_reviews' -%}
              <div class="product-page-section-header__reviews">
                {% if block.settings.show_stars %}
                  <span class="product-page-section-header__star-rating">
                    {% render 'icon-star' %}
                    {% render 'icon-star' %}
                    {% render 'icon-star' %}
                    {% render 'icon-star' %}
                    {% render 'icon-star' %}
                  </span>
                {% endif %}
                {% if block.settings.reviews_text != blank %}
                  <a href="#product-page-reviews">
                    <p class="product-page-section-header__reviews-text">{{ block.settings.reviews_text }}</p>
                  </a>
                {% endif %}
              </div>

            {%- when 'title' -%}
              <div
                class="product-info__block product-info__block--sm product-info__title"
                {{ block.shopify_attributes }}
              >
                <h1 class="product-title h5">
                  {{ product.title | escape }}

                  {% if block.settings.show_weight %}
                    <span
                      class="product-info__weight text-body-extra_small"
                      {% unless current_variant.weight > 0 %}
                        hidden
                      {% endunless %}
                    >
                      {% if current_variant.weight > 0 %}
                        {{ current_variant.weight | weight_with_unit: current_variant.weight_unit }}
                      {% endif %}
                    </span>
                  {% endif %}
                </h1>
              </div>
            {% when 'product_tags' %}
              {% if product.metafields.custom.capacity != blank
                or product.metafields.custom.sauna_type != blank
                or product.metafields.custom.product_tag != blank
              %}
                <div class="product-info__block product-info__block--sm product-info__tags">
                  <ul>
                    {% if product.metafields.custom.capacity != blank %}
                      <li>{{ product.metafields.custom.capacity }} Persons</li>
                    {% endif %}
                    {% if product.metafields.custom.sauna_type_tag != blank %}
                      <li>{{ product.metafields.custom.sauna_type_tag }}</li>
                    {% endif %}
                    {% if product.metafields.custom.product_tag != blank %}
                      <li>{{ product.metafields.custom.product_tag }}</li>
                    {% endif %}
                  </ul>
                </div>
              {% else %}
                {% if product.tags.size > 0 %}
                  <div class="product-info__block product-info__block--sm product-info__tags">
                    <ul>
                      {% for tag in product.tags limit: block.settings.no_tags %}
                        <li>{{ tag }}</li>
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
              {% endif %}

            {%- when 'weight' -%}
              <div
                class="product-info__block product-info__block--sm product-info__weight"
                {{ block.shopify_attributes -}}
                {% unless current_variant.weight > 0 %}
                  hidden
                {% endunless %}
              >
                {% if current_variant.weight > 0 %}
                  {{ current_variant.weight | weight_with_unit: current_variant.weight_unit }}
                {% endif %}
              </div>

            {% when 'delivery' %}
              {% if block.settings.delivery != blank %}
                <div
                  class="product-info__block product-info__block--sm product-info__delivery flex"
                >
                  <p>
                    {{ block.settings.delivery | append: ' Delivery' }}
                  </p>
                  {% assign free_shipping_text = product.metafields.custom.product_tag_free_shipping %}
                  <p>{{ free_shipping_text }}</p>
                  {% if block.settings.stock_left != blank %}
                    <div
                      class="product-info__block product-info__block--sm product-info__stock-warning"
                    >
                      <img src="{{ 'important.svg' | asset_url }}">
                      <span>
                        {{ block.settings.stock_left }}
                      </span>
                    </div>
                  {% endif %}
                </div>
              {% endif %}

            {% when 'pay_hsa_fsa' %}
              <div
                class="product-info__block product-info__block--sm product-info__pay"
              >
                {% render 'affirm-messaging' %}
                <div
                  id="truemed-prequalify"
                  style="font-size: 14px; text-align:center;"
                  icon-height="12"
                  data-public-id="tm_qual_5nnmm2nfwj"
                ></div>
                <script
                  src="https://truemed-public.s3.us-west-1.amazonaws.com/truemed-ads/prequal-widget.min.js"
                  defer
                ></script>
              </div>
            {% when 'copy_link' %}
              <div
                class="product-info__block product-info__block--sm product-info__copy-link"
              >
                <div class="copy-button-wrapper">
                  <button id="copy_link" data-href="{{ shop.url }}/{{ product.url }}">
                    <img src="{{ 'assembly-video-play.svg' | asset_url }}">
                    <span class="copy-link-tooltip">Copy Link</span>
                  </button>
                </div>
              </div>

            {%- when 'barcode' -%}
              <div
                class="product-info__block product-info__block--sm product-info__barcode text-sm"
                {{ block.shopify_attributes -}}
                {% if current_variant.barcode == blank %}
                  hidden
                {% endif %}
              >
                <span class="product-info-label">{{ 'products.product.barcode' | t }}</span>
                <span class="product-info__barcode-value">
                  {%- if current_variant.barcode %}{{ current_variant.barcode }}{% endif -%}
                </span>
              </div>

            {%- when 'price' -%}
              <div class="product-info__block product-info__block--sm product-price" {{ block.shopify_attributes }}>
                <div class="product-info__price">
                  {% render 'price', product: product, use_variant: true %}
                </div>
                {% comment %}
                  <div class="product-info__label">
                    {% render 'product-sale-label', product: product %}
                  </div>
                {% endcomment %}

                {%- if block.settings.show_tax_and_shipping -%}
                  {%- if cart.taxes_included or shop.shipping_policy.body != blank -%}
                    <div class="product-policies text-sm rte">
                      {%- if cart.taxes_included -%}
                        {{ 'products.product.include_taxes' | t }}
                      {%- endif -%}
                      {%- if shop.shipping_policy.body != blank -%}
                        {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
                      {%- endif -%}
                    </div>
                  {%- endif -%}
                {%- endif -%}

                {%- assign instalments_form_id = 'instalments-form-' | append: section.id -%}
                {%- form 'product', product, class: 'js-instalments-form  text-sm mt-2', id: instalments_form_id -%}
                  <input type="hidden" name="id" value="{{ current_variant.id }}">
                  {{ form | payment_terms }}
                {%- endform -%}
              </div>

            {%- when 'rating' -%}
              {%- if product.metafields.reviews.rating.value != blank -%}
                <div
                  class="product-info__block product-info__block--sm product-info__rating"
                  {{ block.shopify_attributes }}
                >
                  {% render 'rating',
                    rating_value: product.metafields.reviews.rating.value,
                    rating_count: product.metafields.reviews.rating_count
                  %}
                </div>
              {%- endif -%}

            {%- when 'variant-picker' -%}
              {%- unless product.has_only_default_variant -%}
                {%- assign has_variant_picker = true -%}
                {%- if section.settings.sticky_atc_panel and product.available -%}
                  <a class="product-options--anchor" id="variants" rel="nofollow"></a>
                {%- endif -%}
                <div class="product-info__block product-options" {{ block.shopify_attributes }}>
                  {% render 'variant-picker',
                    product: product,
                    product_form_id: product_form_id,
                    block: block,
                    media_ratio: media_ratio,
                    swatch_crop: section.settings.media_crop,
                    update_url: true
                  %}
                </div>
              {%- endunless -%}

              {%- if block.settings.show_backorder_text -%}
                <div class="product-info__block product-backorder">
                  {% render 'backorder', product: product, variant: current_variant %}
                </div>
              {%- endif -%}

            {%- when 'inventory-status' -%}
              {%- if current_variant.inventory_management != blank -%}
                {% render 'product-inventory', product: product, current_variant: current_variant, block: block %}
              {%- endif -%}

            {%- when 'buy-buttons' -%}
              <div class="product-info__block--sm" {{ block.shopify_attributes }}>
                <product-form>
                  {%- form 'product', product, class: 'js-product-form js-product-form-main', id: product_form_id -%}
                    {%- liquid
                      assign gift_card_recipient_feature_active = false
                      if block.settings.show_gift_card_recipient and product.gift_card?
                        assign gift_card_recipient_feature_active = true
                      endif

                      assign enable_dynamic_checkout = false
                      if block.settings.enable_dynamic_checkout and product.selling_plan_groups == empty and gift_card_recipient_feature_active == false
                        unless product.template_suffix contains 'preorder'
                          assign enable_dynamic_checkout = true
                        endunless
                      endif
                    -%}

                    {%- if gift_card_recipient_feature_active -%}
                      {% render 'gift-card-recipient', section: section %}
                    {%- endif -%}

                    <div
                      class="alert mb-8 bg-error-bg text-error-text js-form-error text-start"
                      role="alert"
                      hidden
                    ></div>

                    {% assign product_accordions = product.metafields.product_accordions %}

                    {% if product_accordions.size > 0 %}
                      {% for accordion in product_accordions %}
                        <details-disclosure {{ block.shopify_attributes }}>
                          <details
                            class="disclosure disclosure--row"
                            id="product-accordion"
                          >
                            <summary>
                              <div class="flex justify-between items-center">
                                <h2 class="disclosure__title product-info__disclosure font-body font-bold text-body flex flex-auto items-center mb-0">
                                  {{- accordion | first -}}
                                </h2>
                                <span class="disclosure__toggle">
                                  {%- if settings.disclosure_toggle == 'plus' -%}
                                    {% render 'icon-plus' %}
                                  {%- else -%}
                                    {% render 'icon-chevron-down' %}
                                  {%- endif -%}
                                </span>
                              </div>
                            </summary>
                            <div class="disclosure__panel has-motion">
                              <div class="disclosure__content rte">
                                {{ accordion | last }}
                              </div>
                            </div>
                          </details>
                        </details-disclosure>
                      {% endfor %}
                    {% endif %}

                    {% if block.settings.show_msg_box and template.name == 'product' %}
                      {% render 'message-box', block: block %}
                    {% endif %}

                    {% comment %}
                      {% if block.settings.show_price %}
                        <div class=" product__atc-price product-price" {{ block.shopify_attributes }}>
                          <div class="product-info__price">
                            {% render 'price', product: product, use_variant: true %}
                          </div>
                        </div>
                      {% endif %}
                    {% endcomment %}

                    <input type="hidden" name="id" value="{{ current_variant.id }}" disabled>

                    <div class="product-info__add-to-cart flex{% if enable_dynamic_checkout %} qty-input--secondary-btn{% endif %}">
                      {%- if block.settings.show_qty_selector -%}
                        {% render 'quantity-input', layout_style: 'combined' %}
                      {%- else -%}
                        <input type="hidden" name="quantity" value="1">
                      {%- endif -%}

                      <div class="product-info__add-button">
                        {%- capture add_to_cart_text -%}
                          {%- if product.template_suffix contains 'preorder' -%}
                            {{- 'products.product.preorder' | t -}}
                          {%- else -%}
                            {{- 'products.product.add_to_cart' | t -}}
                          {%- endif -%}
                        {%- endcapture -%}
                        <div class="trust-signal">
                          <img
                            src="{{ block.settings.trust_signal_icon | img_url:'master' }}"
                            alt="{{ block.settings.trust_signal_icon.alt }}"
                          >
                          <span>{{ block.settings.trust_signal_heading }}</span>
                        </div>
                        <button
                          id="main-product-atc-{{ section.id }}"
                          type="submit"
                          data-add-to-cart-text="{{ add_to_cart_text | escape }}"
                          class="btn {% if enable_dynamic_checkout %}btn--primary{% else %}btn--secondary{% endif %} w-full {% if product.available %}product-atc-btn{% endif %}"
                          name="add"
                          {% if product.available == false %}
                            disabled
                          {% endif %}
                          {% if custom_popup_active %}
                            style="display: none !important;" disabled
                          {% endif %}
                        >
                          {%- if product.available -%}
                            {{- add_to_cart_text -}}
                          {%- else -%}
                            {{- 'products.product.sold_out' | t -}}
                          {%- endif -%}
                        </button>
                      </div>
                    </div>

                    {%- if enable_dynamic_checkout -%}
                      <div class="dynamic-checkout-btn">
                        <button
                          type="button"
                          class="shopify-payment-button btn btn--secondary w-full"
                          onclick="document.querySelector('[data-testid=ShopifyPay-button]').click();"
                        >
                          Skip to checkout
                        </button>
                        <div style="display:none;">
                          {{ form | payment_button }}
                        </div>
                      </div>
                    {%- endif -%}
                  {%- endform -%}
                </product-form>

                {%- if block.settings.show_pickup_availability -%}
                  {% render 'pickup-availability', current_variant: current_variant %}
                {%- endif -%}
              </div>

            {%- when 'complementary' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                {%- liquid
                  if block.settings.layout == 'carousel'
                    assign grid_classes = 'grid grid-flow-col auto-cols-1 gap-x-theme'
                  endif
                -%}
                {%- render 'recommendations',
                  intent: 'complementary',
                  products_to_show: block.settings.products_to_show,
                  heading: block.settings.heading,
                  layout: block.settings.layout,
                  grid_classes: grid_classes
                -%}
              </div>

            {%- when 'collapsible-content' -%}
              {%- if block.settings.text != blank or block.settings.page.content != blank -%}
                <details-disclosure {{ block.shopify_attributes }}>
                  <details
                    class="disclosure disclosure--row"
                    {% if block.settings.open %}
                      open
                    {% endif %}
                  >
                    <summary>
                      <div class="flex justify-between items-center">
                        <h2 class="disclosure__title product-info__disclosure font-body font-bold text-body flex flex-auto items-center mb-0">
                          {%- if block.settings.icon != 'none' -%}
                            {% render 'icon', icon: block.settings.icon, width: 22, height: 22 %}
                          {%- endif -%}
                          {{- block.settings.heading | default: block.settings.page.title -}}
                        </h2>
                        <span class="disclosure__toggle">
                          {%- if settings.disclosure_toggle == 'plus' -%}
                            {% render 'icon-plus' %}
                          {%- else -%}
                            {% render 'icon-chevron-down' %}
                          {%- endif -%}
                        </span>
                      </div>
                    </summary>
                    <div class="disclosure__panel has-motion">
                      <div class="disclosure__content rte">
                        {{ block.settings.text }}
                        {{ block.settings.page.content }}
                      </div>
                    </div>
                  </details>
                </details-disclosure>
              {%- endif -%}

            {% when 'product_accordions' %}
              {% assign product_accordions = product.metafields.product_accordions %}

              {% if product_accordions.size > 0 %}
                {% for accordion in product_accordions %}
                  <details-disclosure {{ block.shopify_attributes }}>
                    <details
                      class="disclosure disclosure--row"
                    >
                      <summary>
                        <div class="flex justify-between items-center">
                          <h2 class="disclosure__title product-info__disclosure font-body font-bold text-body flex flex-auto items-center mb-0">
                            {{- accordion | first -}}
                          </h2>
                          <span class="disclosure__toggle">
                            {%- if settings.disclosure_toggle == 'plus' -%}
                              {% render 'icon-plus' %}
                            {%- else -%}
                              {% render 'icon-chevron-down' %}
                            {%- endif -%}
                          </span>
                        </div>
                      </summary>
                      <div class="disclosure__panel has-motion">
                        <div class="disclosure__content rte">
                          {{ accordion | last }}
                        </div>
                      </div>
                    </details>
                  </details-disclosure>
                {% endfor %}
              {% endif %}
            {%- when 'features' -%}
              {% assign feature_icons = product.metafields.feature_icons %}
              {% assign feature_headings = product.metafields.feature_headings %}
              {% assign feature_details = product.metafields.feature_details %}
              {% if product.metafields.show_highlights.status %}
                <details-disclosure {{ block.shopify_attributes }}>
                  <details
                    class="disclosure disclosure--row"
                    {% if block.settings.open %}
                      open
                    {% endif %}
                  >
                    <summary>
                      <div class="flex justify-between items-center">
                        <h2 class="disclosure__title product-info__disclosure font-body font-bold text-body flex flex-auto items-center mb-0">
                          {% if product.metafields.feature_highlights.title.value != blank %}
                            {{ product.metafields.feature_highlights.title.value }}
                          {% else -%}
                            Heading
                          {%- endif %}
                        </h2>
                        <span class="disclosure__toggle">
                          {%- if settings.disclosure_toggle == 'plus' -%}
                            {% render 'icon-plus' %}
                          {%- else -%}
                            {% render 'icon-chevron-down' %}
                          {%- endif -%}
                        </span>
                      </div>
                    </summary>
                    <div class="disclosure__panel has-motion">
                      <div class="disclosure__content rte">
                        <div class="feature__row">
                          {% for i in (1..feature_headings.size) %}
                            {% assign loop_index = forloop.index %}
                            <div class="feature__box">
                              <div class="feat__box-title">
                                {% for icon in feature_icons %}
                                  {% if loop_index == forloop.index %}
                                    <img src="{{ icon | last | img_url:'master' }}">
                                  {% endif %}
                                {% endfor %}
                                {% for heading in feature_headings %}
                                  {% if loop_index == forloop.index %}
                                    <h4>{{ heading | last }}</h4>
                                  {% endif %}
                                {% endfor %}
                              </div>
                              <div class="feat__box-content">
                                {% for detail in feature_details %}
                                  {% if loop_index == forloop.index %}
                                    {{ detail | last }}
                                  {% endif %}
                                {% endfor %}
                              </div>
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </details>
                </details-disclosure>
              {% endif %}
              {% comment %}
                {% when 'message_box' %}
                <div class="product-info__block product-info__block--sm product-message__box">
                  <div class="msg-box-wrappper">
                    {% if block.settings.icon != blank -%}
                      <div class="msg-box-img">
                        <img src="{{ block.settings.icon | img_url:'master' }}" alt="{{ block.settings.icon.alt }}">
                      </div>
                    {%- endif %}

                    <div class="msg-box-content">
                      <h4>{{ block.settings.heading }}</h4>
                      {{ block.settings.content }}
                    </div>
                  </div>
                </div>
              {% endcomment %}
            {% when 'delivery_detail' %}
              <div class="product-info__block product-info__block--sm product-delivery-info">
                <div class="delivery-wrapper">
                  <div class="delivery-title">
                    {% if block.settings.icon != blank -%}
                      <img src="{{ block.settings.icon | img_url:'master' }}">
                    {%- endif %}
                    <h4>{{ block.settings.heading }}</h4>
                  </div>

                  <div class="delivery-content">
                    {{ block.settings.content }}
                  </div>
                </div>
              </div>
            {% when 'benefits' %}
              <ul class="icon-with-text icon-with-text--horizontal list-unstyled content-container">
                <li class="icon-with-text__item">
                  <img
                    src="{{ block.settings.icon1 | img_url:'master' }}"
                    width="30"
                    height="30"
                    alt="{{ block.settings.icon1.alt }}"
                  >
                  <span>{{ block.settings.first_text }}</span>
                </li>
                <li class="icon-with-text__item">
                  <img
                    src="{{ block.settings.icon2 | img_url:'master' }}"
                    width="30"
                    height="30"
                    alt="{{ block.settings.icon2.alt }}"
                  >
                  <span>{{ block.settings.second_text }}</span>
                </li>
                <li class="icon-with-text__item">
                  <img
                    src="{{ block.settings.icon3 | img_url:'master' }}"
                    width="30"
                    height="30"
                    alt="{{ block.settings.icon3.alt }}"
                  >
                  <span>{{ block.settings.third_text }}</span>
                </li>
              </ul>
            {%- when 'product-signup' -%}
              {%- liquid
                assign show_block = true
                if block.settings.unavailable_only and product.available == true
                  assign show_block = false
                endif
              -%}
              {%- if show_block -%}
                <div class="product-info__block product-signup" {{ block.shopify_attributes }}>
                  {%- if block.settings.heading != blank -%}
                    <p class="h6">{{ block.settings.heading | escape }}</p>
                  {%- endif -%}

                  {%- if block.settings.text != blank -%}
                    <div class="rte mb-4">{{ block.settings.text }}</div>
                  {%- endif -%}

                  {%- assign id = 'product-signup' -%}
                  {%- form 'contact', id: id, class: 'form' -%}
                    <input type="hidden" name="return_to" value="{{ product.url }}?contact_posted=true">
                    <input
                      type="hidden"
                      name="contact[Message]"
                      value="Customer has completed the product signup form."
                    >
                    <input type="hidden" name="contact[Product ID]" value="{{ product.id }}">
                    <input type="hidden" name="contact[Product URL]" value="{{ shop.url }}{{ product.url }}">
                    <input type="hidden" name="contact[Product Title]" value="{{ product.title | escape }}">

                    <div class="form__field">
                      <label class="label visually-hidden" for="{{ id }}">{{- 'product_signup.label' | t -}}</label>
                      <div class="input-with-button">
                        <input
                          type="email"
                          class="input w-full focus-inset"
                          id="{{ id }}"
                          name="contact[email]"
                          value="{{ form.email }}"
                          placeholder="{{ 'product_signup.placeholder' | t }}"
                          autocomplete="email"
                          {%- if form.posted_successfully? %}
                            aria-describedby="{{ id }}-success"
                          {%- elsif form.errors %}
                            aria-invalid="true"
                            aria-describedby="{{ id }}-error"
                            autofocus
                          {%- endif %}
                          aria-required="true"
                          required
                        >
                        <button class="btn focus-inset has-ltr-icon">
                          <span class="visually-hidden">{{- 'product_signup.button_label' | t -}}</span>
                          {% render 'icon-arrow-right' %}
                        </button>
                      </div>

                      {%- if form.errors -%}
                        <p class="form__field-error" id="{{ id }}-error">
                          {{ form.errors.translated_fields.email | capitalize }}
                          {{ form.errors.messages.email }}
                        </p>
                      {%- endif -%}
                    </div>

                    {%- if form.posted_successfully? -%}
                      <div class="alert bg-success-bg text-success-text" id="{{ id }}-success" tabindex="-1" autofocus>
                        {{ 'product_signup.success' | t }}
                      </div>
                    {%- endif -%}
                  {%- endform -%}
                </div>

                {% if block.settings.divider %}
                  <hr class="mt-8 mb-8">
                {% endif %}
              {%- endif -%}

            {%- when 'newsletter-signup' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                {%- if block.settings.heading != blank -%}
                  <p class="h6">{{ block.settings.heading | escape }}</p>
                {%- endif -%}

                {%- if block.settings.text != blank -%}
                  <div class="rte mb-4">{{ block.settings.text }}</div>
                {%- endif -%}

                {% render 'newsletter-signup',
                  id: 'product-newsletter-signup',
                  tags: 'product page',
                  arrow_button: true
                %}
              </div>

            {%- when 'share' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                <div class="social-share flex items-center">
                  <p class="social-share__heading mb-0 font-bold">{{ 'general.social.share_heading' | t }}:</p>
                  {% render 'social-share', share_title: product.title, share_url: product.url, share_image: product %}
                </div>
              </div>

            {%- when 'richtext' -%}
              {%- if block.settings.text != blank -%}
                <div
                  class="product-info__block product-details__block product-details__text rte"
                  {{ block.shopify_attributes }}
                >
                  {% comment %}
                    <div class="product-detail-title">
                      <h3>
                        {{ block.settings.heading }}
                        <a href="#product-accordion" class="product-accordion-scroll-link"> See more details </a>
                      </h3>
                    </div>
                  {% endcomment %}
                  <div class="product-detail-cntnt">
                    {% comment %} {{ block.settings.text }} {% endcomment %}
                    {{ product.metafields.custom.brief }}
                  </div>
                  {% assign product_accordions = product.metafields.product_accordions %}
                  {% if product_accordions.size > 0 %}
                    <a href="#product-accordion" class="product-accordion-scroll-link"> See more details </a>
                  {%- endif -%}
                </div>
              {%- endif -%}
            {% when 'download_manual' %}
              {% if block.settings.link != blank %}
                <div class="product-info__block product-info__block--sm download-link-wrapper">
                  <div class="product-detail-link">
                    <a href="{{ block.settings.link }}"
                      ><img src="{{ 'download-icon.svg' | asset_url }}" alt="download">{{ block.settings.link_label -}}
                    </a>
                  </div>
                </div>
              {% endif %}

            {% when 'spec_sheet' %}
              {% if block.settings.link != blank %}
                <div class="product-info__block product-info__block--sm download-link-wrapper spec-sheet">
                  <div class="product-detail-link">
                    <a href="{{ block.settings.link }}"
                      ><img src="{{ 'download-icon.svg' | asset_url }}" alt="download">{{ block.settings.link_label -}}
                    </a>
                  </div>
                </div>
              {% endif %}

            {%- when 'image' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                {%- if block.settings.title -%}
                  <p class="h4">{{ block.settings.title }}</p>
                {%- endif -%}

                <div class="flex {{ block.settings.image_align }}">
                  <div class="media relative" style="width: {{ block.settings.image_width }}px;">
                    {%- if block.settings.image != blank -%}
                      {%- if block.settings.url != blank -%}
                        <a href="{{ block.settings.url }}">
                      {%- endif -%}
                      {% render 'image',
                        image: block.settings.image,
                        src_width: block.settings.image_width,
                        quality: 1,
                        srcset_2x: true
                      %}
                      {%- if block.settings.url != blank -%}
                        </a>
                      {%- endif -%}
                    {%- else -%}
                      {{ 'image' | placeholder_svg_tag: 'media__placeholder' }}
                    {%- endif -%}
                  </div>
                </div>
              </div>

            {%- when 'pop-up' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                <modal-opener class="no-js-hidden" data-modal="modal-{{ block.id }}">
                  <button type="button" class="{{ block.settings.link_style }}" aria-haspopup="dialog">
                    {{- block.settings.link_text -}}
                  </button>
                </modal-opener>
                <a href="{{ block.settings.page.url }}" class="link js-hidden">{{ block.settings.link_text }}</a>
              </div>

            {%- when 'custom-liquid' -%}
              <div class="product-info__block" {{ block.shopify_attributes }}>
                {{ block.settings.custom_liquid }}
              </div>

            {%- when 'divider' -%}
              <hr
                class="{{ block.settings.spacing }}{% unless block.settings.show_line %} invisible{% endunless %}"
                {{ block.shopify_attributes }}
              >

            {%- when 'message' -%}
              {%- if block.settings.title != blank and block.settings.show_over_media == false -%}
                <product-message
                  class="product-message product-message--info product-message--out has-motion relative"
                  style="--bg-color: {{ block.settings.bg_color }};--text-color: {{ block.settings.text_color }};"
                  {{ block.shopify_attributes }}
                  {% if block.settings.close == 'persistent' %}
                    data-persistent-close="true"
                  {% endif %}
                  data-block-id="{{ block.id }}"
                >
                  <div class="product-message__inner">
                    {%- if block.settings.icon != 'none' -%}
                      {% render 'icon', icon: block.settings.icon, width: 32, height: 32 %}
                    {%- endif -%}

                    <div class="rte rte--inherit-heading-color">{{ block.settings.title }}</div>

                    {%- if block.settings.close != 'none' -%}
                      <button type="button" class="product-message__close tap-target text-current js-close-message">
                        <span class="visually-hidden">{{ 'accessibility.close' | t }}</span>
                        {% render 'icon-close' %}
                      </button>
                    {%- endif -%}
                  </div>
                </product-message>
              {%- endif -%}

            {%- when 'description' -%}
              {%- if block.settings.show_as_collapsible_content -%}
                <details-disclosure {{ block.shopify_attributes }}>
                  <details
                    class="disclosure disclosure--row"
                    {% if block.settings.open %}
                      open
                    {% endif %}
                  >
                    <summary>
                      <div class="flex justify-between items-center">
                        <h2 class="disclosure__title product-info__disclosure font-body font-bold text-body flex flex-auto items-center mb-0">
                          {%- if block.settings.icon != 'none' -%}
                            {% render 'icon', icon: block.settings.icon, width: 22, height: 22 %}
                          {%- endif -%}
                          {{ 'products.product.description' | t }}
                        </h2>
                        <span class="disclosure__toggle">
                          {%- if settings.disclosure_toggle == 'plus' -%}
                            {% render 'icon-plus' %}
                          {%- else -%}
                            {% render 'icon-chevron-down' %}
                          {%- endif -%}
                        </span>
                      </div>
                    </summary>
                    <div class="disclosure__panel has-motion">
                      <div class="disclosure__content rte">
                        {{ product.description }}
                      </div>
                    </div>
                  </details>
                </details-disclosure>
              {%- else -%}
                <div
                  class="product-info__block product-info__block--sm rte product-description"
                  {{ block.shopify_attributes }}
                >
                  {{ product.description }}
                </div>
              {%- endif -%}

            {%- when 'product-labels' -%}
              {%- capture variant_labels -%}
                {%- for variant in product.variants -%}
                  {%- liquid
                    assign variant_label = blank
                    capture variant_label
                      render 'product-label', product: product, variant: variant, is_product_card: false, limit: 99
                    endcapture
                  -%}
                  {%- if variant_label != blank -%}
                    <div class="variant-label js-variant-label" hidden data-variant-id="{{ variant.id }}">
                      {{ variant_label }}
                    </div>
                  {%- endif -%}
                {%- endfor -%}
              {%- endcapture -%}

              {%- if variant_labels != blank -%}
                <variant-label
                  class="block product-info__block product-info__block--sm"
                  data-current-variant-id="{{ current_variant.id }}"
                >
                  {{ variant_labels }}
                </variant-label>
                <script src="{{ 'variant-label.js' | asset_url }}" defer="defer"></script>
              {%- endif -%}
          {%- endcase -%}
        {%- endfor -%}

        {%- if section.settings.stick_on_scroll -%}
          </div>
          </sticky-scroll-direction>
        {%- endif -%}
      </div>
      <div class="product-sidebar">
        {%- for block in section.blocks -%}
          {%- if block.type == 'questions_box' -%}
            <div class="product-info__block product-questions-box" {{ block.shopify_attributes }}>
              <h3 class="h5" style="margin-top: 0; margin-bottom: 20px;">
                {{ block.settings.heading }}
              </h3>

              <div
                class="flex items-start mb-6"
                style="display: flex; gap: 15px; margin-bottom: 15px; align-items: center;"
              >
                {%- if product.featured_media -%}
                  <div style="width: 100px; height: 100px; background-color: #fbf2e9; flex-shrink: 0; overflow: hidden; border-radius: 4px; border: 1px solid #eee;">
                    {% render 'image',
                      image: product.featured_media,
                      src_width: 120,
                      aspect_ratio: 1,
                      class: 'w-full h-full object-cover have-questions-column-product-image'
                    %}
                  </div>
                {%- endif -%}
                <div class="text-sm leading-tight" style="font-size: 14px; font-weight: 500; line-height: 1.4;">
                  {{ product.title }}
                </div>
              </div>

              <div class="product-info__price">
                {% render 'price', product: product, use_variant: true %}
              </div>

              <hr>

              <div class="grid gap-3" style="display: grid; gap: 12px;">
                <a
                  href="{{ block.settings.chat_link | default: '#' }}"
                  class="btn w-full js-open-livechat"
                  aria-label="{{ block.settings.chat_label }}"
                >
                  <span class="talk-to-live-agent-label">
                    {{ block.settings.chat_label }}
                  </span>
                  <svg
                    class="chat-icon"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <!-- Chat bubble outline -->
                    <rect
                      x="3" y="4" width="18" height="14" rx="2" ry="2"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    />
                    <!-- Tail -->
                    <polyline
                      points="4,18 4,21 7,18"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    />
                    <!-- Lines inside bubble -->
                    <line x1="7" y1="9" x2="17" y2="9" stroke="currentColor" stroke-width="2" />
                    <line x1="7" y1="13" x2="13" y2="13" stroke="currentColor" stroke-width="2" />
                  </svg>
                </a>

                {%- if block.settings.email_address != blank -%}
                  <a
                    href="mailto:{{ block.settings.email_address }}"
                    class="btn w-full send-us-email"
                  >
                    Send us an Email
                  </a>
                {%- endif -%}

                <div class="or-separator">
                  <hr>
                  <p>OR</p>
                  <hr>
                </div>

                {%- capture extra_atc_text -%}
                  {%- if product.template_suffix contains 'preorder' -%}
                    {{- 'products.product.preorder' | t -}}
                  {%- else -%}
                    {{- 'products.product.add_to_cart' | t -}}
                  {%- endif -%}
                {%- endcapture -%}

                {%- unless custom_popup_active -%}
                  <button
                    type="button"
                    class="btn w-full extra-atc-btn"
                    {% unless product.available %}
                      disabled
                    {% endunless %}
                    onclick="(function() { var atc = document.getElementById('main-product-atc-{{ section.id }}'); if (atc && !atc.disabled) { atc.click(); } })();"
                  >
                    {%- if product.available -%}
                      {{ extra_atc_text }}
                    {%- else -%}
                      {{ 'products.product.sold_out' | t }}
                    {%- endif -%}
                  </button>
                {%- endunless -%}

                {% comment %}
                  <button type="button" id="btn-trigger-preorder" class="btn w-full extra-atc-btn">Pre-Order Now</button>
                  <button type="button" id="btn-trigger-waitlist" class="btn w-full extra-atc-btn">Join Waitlist</button>
                  <button type="button" id="btn-trigger-upcoming" class="btn w-full extra-atc-btn">Get Notified</button>
                {% endcomment %}

                <!-- Custom Popups Triggers -->
                {%- if product.metafields.custom.enable_preorder == true -%}
                  <button type="button" id="btn-trigger-preorder" class="btn w-full extra-atc-btn">
                    Pre-Order Now
                  </button>
                {%- endif -%}

                {%- if product.metafields.custom.enable_waitlist == true -%}
                  <button type="button" id="btn-trigger-waitlist" class="btn w-full extra-atc-btn">
                    Join Waitlist
                  </button>
                {%- endif -%}

                {%- if product.metafields.custom.enable_upcoming == true -%}
                  <button type="button" id="btn-trigger-upcoming" class="btn w-full extra-atc-btn">Get Notified</button>
                {%- endif -%}

                {% comment %}
                    <a
                      href="mailto:{{ block.settings.email_address }}"
                      class="btn btn--secondary w-full"
                      style="background-color: white; border: 1px solid #1f4c46; color: #1f4c46;"
                    >
                      {{ block.settings.email_label }}
                    </a>
                  </div>
                {% endcomment %}

                {% comment %}
                  {%- if block.settings.email_address != blank -%}
                    <div
                      class="text-center mt-4 text-sm"
                      style="margin-top: 15px; text-align: center; font-size: 15px; font-weight: 500"
                    >
                      or
                      <a
                        href="mailto:{{ block.settings.email_address }}"
                        style="text-decoration: underline;"
                      >
                        send us an email
                      </a>
                    </div>
                  {%- endif -%}
                {% endcomment %}

                {% comment %}
                  {%- if block.settings.phone_text != blank -%}
                    <div class="text-center mt-4 text-sm" style="margin-top: 15px; text-align: center; font-size: 14px;">
                      {{ block.settings.phone_text }}
                    </div>
                  {%- endif -%}
                {% endcomment %}
              </div>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

{%- render 'product-popups' -%}

{%- if section.settings.sticky_atc_panel and product.available -%}
  <link rel="stylesheet" href="{{ 'sticky-atc-panel.css' | asset_url }}" media="print" onload="this.media='all'">
  <script src="{{ 'sticky-atc-panel.js' | asset_url }}" defer="defer"></script>

  <sticky-atc-panel class="sticky-atc-panel sticky-atc-panel--out fixed bottom-0 {{ section.settings.sticky_atc_position }} invisible{% if section.settings.sticky_atc_mobile == false %} hidden md:block{% endif %}">
    <div class="card card--row card--related card--sticky-atc relative flex items-center">
      {%- if product.featured_media -%}
        <div class="card__media{% if settings.blend_product_images %} image-blend{% endif %}">
          {%- liquid
            assign image_width = 44
            if product.featured_media.preview_image.aspect_ratio >= 1
              assign image_width = 56
            endif
          -%}
          {% render 'image', image: product.featured_media.preview_image, src_width: image_width, srcset_2x: true %}
        </div>
      {%- endif -%}

      <div class="card__info">
        <p class="sticky-atc-panel__heading h6 regular-text text-current">
          {{ product.title | escape | truncate: 70 }}
        </p>

        {%- render 'price', product: product -%}
      </div>

      <div class="card__buttons">
        {%- liquid
          if has_variant_picker
            assign anchor = 'variants'
          else
            assign anchor = 'product-info'
          endif
        -%}
        {%- if product.has_only_default_variant -%}
          <a href="#{{ anchor }}" rel="nofollow" class="btn btn--secondary btn--sm">
            {{- 'products.product.view_details' | t -}}
          </a>
        {%- else -%}
          <a class="btn btn--secondary btn--sm" href="#{{ anchor }}" rel="nofollow">
            {{- 'products.product.choose_options' | t -}}
          </a>
        {%- endif -%}
      </div>
    </div>
  </sticky-atc-panel>
{%- endif -%}

{%- if first_3d_model -%}
  <script type="application/json" id="product-json-{{ product.id }}">
    {{ product.media | where: 'media_type', 'model' | json }}
  </script>
{%- endif -%}

{% render 'structured-data-product', product: product, current_variant: current_variant %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const titles = document.querySelectorAll('.product-detail-title');
    if (titles.length > 1) {
      titles.forEach((title, index) => {
        if (index > 0) {
          title.style.display = 'none'; // Hide all but the first one
        }
      });
    }
  });
</script>

<!-- GLOBO - PRODUCT -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    let quickBannerButton = document.querySelectorAll('.quick-banner-atc');
    let submitButton = document.querySelector('.product-info__add-button');
    var _learnq = window._learnq || [];

    submitButton?.addEventListener('click', function () {
      _learnq.push(['track', 'Added to Cart', item]);
    });

    if (quickBannerButton) {
      quickBannerButton.forEach((button) => {
        button.addEventListener('click', function () {
          let cloneAtcButton = document.querySelector('.gpo-clone-atc-button');
          let orignalButton = document.querySelector('.product-info__add-button .product-atc-btn');

          if (cloneAtcButton) {
            cloneAtcButton.click();
            quickBannerButton.disabled = true;
            quickBannerButton.classList.add('is-loading');

            setTimeout(() => {
              quickBannerButton.classList.remove('is-loading');
              quickBannerButton.disabled = false;
            }, 1200);
          } else if (orignalButton) {
            orignalButton.click();
            quickBannerButton.disabled = true;
            quickBannerButton.classList.add('is-loading');
            setTimeout(() => {
              quickBannerButton.disabled = false;
              quickBannerButton.classList.remove('is-loading');
            }, 1200);
          } else {
            console.log('.gpo-clone-atc-button element not found');
          }
        });
      });
    } else {
      console.log('.quick-banner-atc button not found');
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    function processOvItems() {
      // Get all .gpo-ov-item elements
      const ovItems = document.querySelectorAll('.gpo-ov-item');
      // Check if any ovItems are found
      if (ovItems.length > 0) {
        console.log('ovItems found:', ovItems.length);

        // Loop through each .gpo-ov-item
        var counter = 1;
        ovItems.forEach((item) => {
          let checkboxMark = document.createElement('span');
          checkboxMark.classList.add('checkmark');
          item.prepend(checkboxMark);

          const addOnSpan = item.querySelector('.gpo-tooltip__title span.addOn');
          // Create a new span element
          const newSpan = document.createElement('span');

          // Find the .gpo-ov-title element within this item
          const ovTitle = item.querySelector('.gpo-ov-title');

          // if (addOnSpan) {
          // Get the value from the span.addOn element and remove + and brackets
          // let addOnValue = addOnSpan.textContent;
          // addOnValue = addOnValue.replace(/[+()]/g, '').trim();
          // if (ovTitle) {
          //     ovTitle.appendChild(newSpan);
          //     newSpan.textContent = addOnValue;
          // }
          // }else{
          //   let addOnText = "Free Included in Your Purchse";
          //   if (ovTitle) {
          //         ovTitle.appendChild(newSpan);
          //         newSpan.textContent = addOnText;
          //     }
          // }
        });
        return true; // Indicate that items were processed
      } else {
        console.log('ovItems not found');
        return false; // Indicate that items were not found
      }
    }

    let attempts = 0;
    const maxAttempts = 6;

    const intervalId = setInterval(() => {
      const itemsProcessed = processOvItems();
      attempts++;
      if (itemsProcessed || attempts >= maxAttempts) {
        clearInterval(intervalId); // Stop the interval
        if (attempts >= maxAttempts) {
          console.log('Stopped attempting to process ovItems');
        }
      }
    }, 1000);
  });
</script>

<script>
  document.getElementById('copy_link').addEventListener('click', function () {
    const tooptip = document.querySelector('.copy-link-tooltip');
    var dataHref = this.getAttribute('data-href');
    navigator.clipboard
      .writeText(dataHref)
      .then(function () {
        console.log('Copied to clipboard:', dataHref);
        tooptip.textContent = 'Link Copied!';
        setTimeout(() => {
          tooptip.textContent = 'Copy Link';
        }, 1500);
      })
      .catch(function (error) {
        console.error('Error copying to clipboard:', error);
      });
  });
</script>

{% comment %}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var chatButtons = document.querySelectorAll('.js-open-livechat');
      if (!chatButtons.length) return;

      // Local toggle state for clicks on THIS button
      var isOpen = false;

      function hasNewAPI() {
        return window.LiveChatWidget && typeof LiveChatWidget.call === 'function';
      }

      function hasOldAPI() {
        return (
          window.LC_API &&
          (typeof LC_API.open_chat_window === 'function' || typeof LC_API.minimize_chat_window === 'function')
        );
      }

      function openChat() {
        if (hasNewAPI()) {
          LiveChatWidget.call('maximize');
        } else if (hasOldAPI()) {
          LC_API.open_chat_window && LC_API.open_chat_window();
        }
      }

      function closeChat() {
        if (hasNewAPI()) {
          // Depending on config, you might want 'hide' instead of 'minimize'
          LiveChatWidget.call('minimize');
        } else if (hasOldAPI()) {
          if (typeof LC_API.minimize_chat_window === 'function') {
            LC_API.minimize_chat_window();
          } else if (typeof LC_API.hide_chat_window === 'function') {
            LC_API.hide_chat_window();
          }
        }
      }

      function toggleChat() {
        // If widget still isn't loaded, just try opening
        if (!hasNewAPI() && !hasOldAPI()) {
          // Optional: you could console.warn here, but not required
          return;
        }

        if (isOpen) {
          closeChat();
        } else {
          openChat();
        }

        isOpen = !isOpen;
      }

      chatButtons.forEach(function (btn) {
        btn.addEventListener('click', function (e) {
          e.preventDefault();
          toggleChat();
        });
      });
    });
  </script>
{% endcomment %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var chatButtons = document.querySelectorAll('.js-open-livechat');
    if (!chatButtons.length) return;

    // one shared state for all "Talk to a live agent" buttons
    var chatIsOpen = false;

    function hasNewAPI() {
      return window.LiveChatWidget && typeof LiveChatWidget.call === 'function';
    }

    function hasOldAPI() {
      return (
        window.LC_API &&
        (typeof LC_API.open_chat_window === 'function' ||
          typeof LC_API.minimize_chat_window === 'function' ||
          typeof LC_API.hide_chat_window === 'function')
      );
    }

    function openChat() {
      if (hasNewAPI()) {
        LiveChatWidget.call('maximize');
      } else if (hasOldAPI()) {
        LC_API.open_chat_window && LC_API.open_chat_window();
      }
    }

    function closeChat() {
      if (hasNewAPI()) {
        // try minimize; if your setup prefers 'hide', just swap it
        LiveChatWidget.call('minimize');
      } else if (hasOldAPI()) {
        if (typeof LC_API.minimize_chat_window === 'function') {
          LC_API.minimize_chat_window();
        } else if (typeof LC_API.hide_chat_window === 'function') {
          LC_API.hide_chat_window();
        }
      }
    }

    function updateButtonStyles() {
      chatButtons.forEach(function (btn) {
        btn.classList.toggle('chat-open', chatIsOpen);
      });
    }

    chatButtons.forEach(function (btn) {
      btn.addEventListener('click', function (e) {
        e.preventDefault();

        if (!hasNewAPI() && !hasOldAPI()) {
          // widget not ready; you can optionally console.warn here
          return;
        }

        if (chatIsOpen) {
          closeChat();
        } else {
          openChat();
        }

        chatIsOpen = !chatIsOpen;
        updateButtonStyles();
      });
    });

    // optional: if LiveChat has callbacks, you could sync chatIsOpen here too
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Select the main price (Source) - The one that currently works
    const mainPrice = document.querySelector('.product-info .product-info__price');

    // Select the sidebar price (Target) - The one that needs updating
    const sidebarPrice = document.querySelector('.product-sidebar .product-info__price');

    if (mainPrice && sidebarPrice) {
      // Create an observer instance linked to the callback function
      const observer = new MutationObserver(function (mutationsList) {
        // Copy the content from main to sidebar whenever main changes
        sidebarPrice.innerHTML = mainPrice.innerHTML;
      });

      // Start observing the target node for configured mutations
      observer.observe(mainPrice, {
        attributes: true,
        childList: true,
        subtree: true,
        characterData: true,
      });
    }
  });
</script>

{% render 'modify-globo-tooltip' %}
{% render 'popup-preorder' %}
{% render 'popup-waitlist' %}
{% render 'popup-upcoming' %}

{% schema %}
{
  "name": "Product",
  "class": "cc-main-product product-main",
  "settings": [
    {
      "type": "checkbox",
      "id": "stick_on_scroll",
      "label": "Stick product info on scroll",
      "info": "Applies to large screens only.",
      "default": true
    },
    {
      "type": "header",
      "content": "Sticky 'Add to cart' prompt"
    },
    {
      "type": "paragraph",
      "content": "Shows a small prompt to scroll the page back to the product form."
    },
    {
      "type": "checkbox",
      "id": "sticky_atc_panel",
      "label": "Enable sticky 'Add to cart' prompt",
      "default": false
    },
    {
      "type": "select",
      "id": "sticky_atc_position",
      "label": "Position on large screens",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "sticky-atc-panel--center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        }
      ],
      "default": "end"
    },
    {
      "type": "checkbox",
      "id": "sticky_atc_mobile",
      "label": "Show on mobile",
      "default": true
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "paragraph",
      "content": "Learn more about [media types](https://help.shopify.com/en/manual/products/product-media)"
    },
    {
      "type": "select",
      "id": "media_layout",
      "label": "Layout on large screens",
      "info": "Stacked works best when all the product images are the same size. Mobile will always display a slider.",
      "options": [
        {
          "value": "stacked",
          "label": "Stacked"
        },
        {
          "value": "slider",
          "label": "Slider"
        }
      ],
      "default": "slider"
    },
    {
      "type": "select",
      "id": "media_size",
      "label": "Media width",
      "info": "Media will be full width on mobile.",
      "options": [
        {
          "value": "default",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "default"
    },
    {
      "type": "select",
      "id": "media_ratio",
      "label": "Media aspect ratio",
      "info": "Natural should only be used when images are the same dimensions.",
      "options": [
        {
          "value": "natural",
          "label": "Natural"
        },
        {
          "value": "1.33",
          "label": "Landscape (4:3)"
        },
        {
          "value": "1.77",
          "label": "Landscape (16:9)"
        },
        {
          "value": "1",
          "label": "Square"
        },
        {
          "value": "0.75",
          "label": "Portrait"
        }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "media_crop",
      "label": "Media crop",
      "info": "Only applies if the \"Media Shape\" is not \"Natural\".",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "none"
    },
    {
      "type": "select",
      "id": "hover_zoom",
      "label": "Zoom on hover",
      "info": "Only applies on large screens and when the original image is large enough.",
      "default": "large",
      "options": [
        {
          "value": "off",
          "label": "Off"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        },
        {
          "value": "original",
          "label": "Original image"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": false
    },
    {
      "type": "header",
      "content": "Stacked Layout"
    },
    {
      "type": "radio",
      "id": "stacked_scroll",
      "label": "Scroll to variant media",
      "options": [
        {
          "value": "never",
          "label": "Never"
        },
        {
          "value": "change",
          "label": "When the variant is changed"
        },
        {
          "value": "always",
          "label": "When the variant is changed or the page loads"
        }
      ],
      "default": "always"
    },
    {
      "type": "checkbox",
      "id": "underline_active",
      "label": "Underline active media",
      "default": true
    },
    {
      "type": "header",
      "content": "Slider Layout"
    },
    {
      "type": "select",
      "id": "media_thumbs",
      "label": "Show thumbnails",
      "options": [
        {
          "value": "never",
          "label": "Never"
        },
        {
          "value": "desktop",
          "label": "Large screens only"
        },
        {
          "value": "always",
          "label": "Always"
        }
      ],
      "default": "desktop"
    },
    {
      "type": "select",
      "id": "thumb_ratio",
      "label": "Thumbnail shape",
      "options": [
        {
          "value": "natural",
          "label": "Natural"
        },
        {
          "value": "1.33",
          "label": "Landscape"
        },
        {
          "value": "1",
          "label": "Square"
        },
        {
          "value": "0.75",
          "label": "Portrait"
        }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "thumb_crop",
      "info": "Only applies if the \"Thumbnail shape\" is not \"Natural\"",
      "label": "Thumb crop",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "none"
    },
    {
      "type": "select",
      "id": "media_arrows",
      "label": "Show arrows",
      "options": [
        {
          "value": "never",
          "label": "Never"
        },
        {
          "value": "mobile",
          "label": "Mobile only"
        },
        {
          "value": "desktop",
          "label": "Large screens only"
        },
        {
          "value": "always",
          "label": "Always"
        }
      ],
      "default": "desktop"
    },
    {
      "type": "checkbox",
      "id": "show_slide_count",
      "label": "Show slide count",
      "default": true
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Media border",
      "info": "Set to transparent to remove",
      "default": "transparent"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Media background",
      "info": "When using 'Blend product images' (Theme Settings > Colors > Color blending), the color specified there will override this.",
      "default": "#f4f4f4"
    },
    {
      "type": "header",
      "content": "Multiple variant images"
    },
    {
      "type": "checkbox",
      "id": "enable_media_grouping",
      "label": "Show media only associated with the selected variant",
      "info": "Other variants' media will be hidden",
      "default": false
    },
    {
      "type": "text",
      "id": "media_grouping_option",
      "label": "Variant option label",
      "info": "The label used to switch between images",
      "default": "Color,Colour,Couleur,Farbe"
    },
    {
      "type": "paragraph",
      "content": "If your store displays multiple languages, include all translations separated by a comma, e.g. Color,Couleur,Farbe"
    },
    {
      "type": "paragraph",
      "content": "Arrange product media by this option (all 'red' media together, then all 'blue' media together, for example). The first media in each group should be assigned to a variant. [Read more](https://cleancanvas.co.uk/support/enterprise/settings/grouped-variant-images)"
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "questions_box",
      "name": "Questions Box",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Have questions about this product?"
        },
        {
          "type": "text",
          "id": "chat_label",
          "label": "Chat Button Label",
          "default": "Talk to a live agent"
        },
        {
          "type": "url",
          "id": "chat_link",
          "label": "Chat Button Link",
          "info": "Leave blank to trigger standard Shopify Chat"
        },
        {
          "type": "text",
          "id": "email_label",
          "label": "Email Button Label",
          "default": "Send us an email"
        },
        {
          "type": "text",
          "id": "email_address",
          "label": "Email Address",
          "default": "sales@salussaunas.com"
        },
        {
          "type": "text",
          "id": "phone_text",
          "label": "Phone Text",
          "default": "or Call us (888) 287-0111"
        }
      ]
    },
    {
      "type": "product_tags",
      "name": "Product Tags",
      "settings": [
        {
          "type": "range",
          "id": "no_tags",
          "label": "Number of tags",
          "min": 2,
          "max": 5,
          "default": 4
        }
      ]
    },
    {
      "type": "buy-buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_qty_selector",
          "label": "Show quantity selector",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "enable_dynamic_checkout",
          "label": "Show dynamic checkout button",
          "info": "Using the payment methods available on your store, customers see their preferred option, like PayPal or Apple Pay. [Learn more](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_pickup_availability",
          "label": "Show pickup availability",
          "info": "Show customers where they can pick up the product. [Learn more](https://help.shopify.com/en/manual/shipping/setting-up-and-managing-your-shipping/local-methods/local-pickup)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": false,
          "label": "Show recipient information form for gift cards",
          "info": "Allow customers to send gift cards to a recipient along with a personal message. When enabled, the dynamic checkout button will be disabled for gift cards. [Learn more](https://help.shopify.com/manual/online-store/themes/customizing-themes/add-gift-card-recipient-fields)"
        },
        {
          "type": "header",
          "content": "Message Box"
        },
        {
          "type": "checkbox",
          "id": "show_msg_box",
          "label": "Show Mesage Box"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "image_picker",
          "id": "icon1",
          "label": "Second Icon"
        },
        {
          "type": "image_picker",
          "id": "trust_signal_icon",
          "label": "Trust Signal Icon"
        },
        {
          "type": "text",
          "id": "trust_signal_heading",
          "label": "Trust Signal Heading"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "richtext",
          "id": "content1",
          "label": "Second Content"
        },
        {
          "type": "header",
          "content": "Product Price"
        },
        {
          "type": "checkbox",
          "id": "show_price",
          "label": "Enable Product Price",
          "default": true
        }
      ]
    },
    {
      "type": "collapsible-content",
      "name": "Collapsible content",
      "settings": [
        {
          "type": "paragraph",
          "content": "This will be automatically hidden if there is no content to show."
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Collapsible content"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "award",
              "label": "Award"
            },
            {
              "value": "box",
              "label": "Box"
            },
            {
              "value": "briefcase",
              "label": "Briefcase"
            },
            {
              "value": "calendar",
              "label": "Calendar"
            },
            {
              "value": "chat_bubble",
              "label": "Chat bubble"
            },
            {
              "value": "check_mark",
              "label": "Check mark"
            },
            {
              "value": "check_mark_in_circle",
              "label": "Check mark in circle"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "credit_card",
              "label": "Credit card"
            },
            {
              "value": "dollar_sign",
              "label": "Dollar sign"
            },
            {
              "value": "dryer",
              "label": "Dryer"
            },
            {
              "value": "email",
              "label": "Email"
            },
            {
              "value": "eye",
              "label": "Eye"
            },
            {
              "value": "feather",
              "label": "Feather"
            },
            {
              "value": "gift",
              "label": "Gift"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "iron",
              "label": "Iron"
            },
            {
              "value": "leaf",
              "label": "Leaf"
            },
            {
              "value": "leather",
              "label": "Leather"
            },
            {
              "value": "lock",
              "label": "Lock"
            },
            {
              "value": "map_pin",
              "label": "Map pin"
            },
            {
              "value": "pants",
              "label": "Pants"
            },
            {
              "value": "percent",
              "label": "Percent"
            },
            {
              "value": "phone",
              "label": "Phone"
            },
            {
              "value": "plane",
              "label": "Plane"
            },
            {
              "value": "price_tag",
              "label": "Price tag"
            },
            {
              "value": "question_mark",
              "label": "Question mark"
            },
            {
              "value": "return",
              "label": "Return"
            },
            {
              "value": "ruler",
              "label": "Ruler"
            },
            {
              "value": "scissors",
              "label": "Scissors"
            },
            {
              "value": "shirt",
              "label": "Shirt"
            },
            {
              "value": "shoe",
              "label": "Shoe"
            },
            {
              "value": "silhouette",
              "label": "Silhouette"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "truck",
              "label": "Truck"
            },
            {
              "value": "washing",
              "label": "Washing"
            }
          ],
          "default": "none"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Content",
          "default": "<p>Add your content here</p>"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Content from page"
        },
        {
          "type": "checkbox",
          "id": "open",
          "label": "Open by default",
          "default": false
        }
      ]
    },
    {
      "type": "product_accordions",
      "name": "Product Accordions",
      "limit": 1
    },
    {
      "type": "download_manual",
      "name": "Download Manual",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "link_label",
          "label": "Link Label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "spec_sheet",
      "name": "Spec Sheet",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "link_label",
          "label": "Link Label",
          "default": "Download Spec Sheet"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "message_box",
      "name": "Message Box",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "benefits",
      "name": "Benefits Detail",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "icon1",
          "label": "First Icon"
        },
        {
          "type": "image_picker",
          "id": "icon2",
          "label": "Second Icon"
        },
        {
          "type": "image_picker",
          "id": "icon3",
          "label": "Third Icon"
        },
        {
          "type": "text",
          "id": "first_text",
          "label": "First Description"
        },
        {
          "type": "text",
          "id": "second_text",
          "label": "Second Description"
        },
        {
          "type": "text",
          "id": "third_text",
          "label": "Third Description"
        }
      ]
    },
    {
      "type": "delivery_detail",
      "name": "Delivery Detail",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "features",
      "name": "Features",
      "settings": [
        {
          "type": "paragraph",
          "content": "This will be automatically hidden if there is no content to show."
        },
        {
          "type": "checkbox",
          "id": "open",
          "label": "Open by default",
          "default": false
        }
      ]
    },
    {
      "type": "custom-liquid",
      "name": "Custom Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid"
        }
      ]
    },
    {
      "type": "divider",
      "name": "Divider",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_line",
          "label": "Show line",
          "default": true
        },
        {
          "type": "select",
          "id": "spacing",
          "label": "Spacing",
          "options": [
            {
              "value": "mt-8 mb-8",
              "label": "Default"
            },
            {
              "value": "mt-12 mb-12",
              "label": "Large"
            }
          ],
          "default": "mt-8 mb-8"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 80,
          "max": 1000,
          "step": 10,
          "unit": "px",
          "label": "Width",
          "default": 200
        },
        {
          "type": "select",
          "id": "image_align",
          "label": "Alignment",
          "options": [
            {
              "value": "justify-start",
              "label": "Left"
            },
            {
              "value": "justify-center",
              "label": "Center"
            },
            {
              "value": "justify-end",
              "label": "Right"
            }
          ],
          "default": "justify-start"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        }
      ]
    },
    {
      "type": "inventory-status",
      "name": "Inventory status",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Inventory colors and thresholds can be changed in \"Theme Settings > Product Inventory\"."
        },
        {
          "type": "checkbox",
          "id": "show_indicator_bar",
          "label": "Show inventory indicator bar",
          "default": true
        },
        {
          "type": "header",
          "content": "Urgency messages"
        },
        {
          "type": "checkbox",
          "id": "show_urgency_message",
          "label": "Show urgency message",
          "default": true
        },
        {
          "type": "richtext",
          "id": "text_very_low",
          "label": "Text when inventory is very low",
          "default": "<p>- Almost gone!</p>"
        },
        {
          "type": "richtext",
          "id": "text_low",
          "label": "Text when inventory is low",
          "default": "<p>- Hurry while stocks last!</p>"
        },
        {
          "type": "richtext",
          "id": "text_normal",
          "label": "Text when inventory is normal"
        },
        {
          "type": "richtext",
          "id": "text_no_stock",
          "label": "Text when out of stock"
        },
        {
          "type": "richtext",
          "id": "text_no_stock_backordered",
          "label": "Text when backordered",
          "default": "<p>Backordered</p>"
        }
      ]
    },
    {
      "type": "product-signup",
      "name": "Product sign-up",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "You will receive an email every time someone fills in this form."
        },
        {
          "type": "checkbox",
          "id": "unavailable_only",
          "label": "Only show when the product is not available",
          "info": "For example, when all variants have 0 stock. Note, email alerts will NOT be automatically sent to the customer when the product becomes available - you will need to do this.",
          "default": false
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Sign up to be the first to know when it's here</p>"
        },
        {
          "type": "checkbox",
          "id": "divider",
          "label": "Show dividing line below",
          "default": false
        }
      ]
    },
    {
      "type": "newsletter-signup",
      "name": "Newsletter sign-up",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Subscribe to our newsletter"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Sign up for exclusive offers.</p>"
        },
        {
          "type": "paragraph",
          "content": "Customers who subscribe will have an account created for them. [Learn more](https://help.shopify.com/en/manual/customers/manage-customers)"
        }
      ]
    },
    {
      "type": "pop-up",
      "name": "Pop-up",
      "settings": [
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text",
          "default": "Pop-up link"
        },
        {
          "type": "select",
          "id": "link_style",
          "label": "Link style",
          "options": [
            {
              "value": "link",
              "label": "Link"
            },
            {
              "value": "btn btn--primary",
              "label": "Primary button"
            },
            {
              "value": "btn btn--secondary",
              "label": "Secondary button"
            }
          ],
          "default": "link"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Content"
        },
        {
          "id": "page",
          "type": "page",
          "label": "Content from page"
        }
      ]
    },
    {
      "type": "weight",
      "name": "Weight",
      "limit": 1
    },
    {
      "type": "delivery",
      "name": "Delivery",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "delivery",
          "label": "Delivery"
        },
        {
          "type": "text",
          "id": "stock_left",
          "label": "Stock Left Text"
        }
      ]
    },
    {
      "type": "pay_hsa_fsa",
      "name": "Pay With HSA/FSA",
      "limit": 2
    },
    {
      "type": "star_reviews",
      "name": "Star Reviews",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_stars",
          "label": "Show 5-star rating icon",
          "default": true
        },
        {
          "type": "text",
          "id": "reviews_text",
          "label": "Reviews Text",
          "default": "Hundreds of verified 5-star reviews"
        }
      ]
    },
    {
      "type": "copy_link",
      "name": "copy Link",
      "limit": 1
    },
    {
      "type": "barcode",
      "name": "Barcode (ISBN, UPC, etc)",
      "limit": 1
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_tax_and_shipping",
          "label": "Show tax and shipping information",
          "default": true
        }
      ]
    },
    {
      "type": "rating",
      "name": "Product rating",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "To display a rating, add a product rating app. [Learn more](https://apps.shopify.com/search?q=reviews)"
        }
      ]
    },
    {
      "type": "complementary",
      "name": "Complementary products",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "To select complementary products, add the Search & Discovery app. [Learn more](https://help.shopify.com/manual/online-store/search-and-discovery/product-recommendations)"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Goes well with"
        },
        {
          "type": "range",
          "id": "products_to_show",
          "min": 1,
          "max": 10,
          "step": 1,
          "default": 4,
          "label": "Maximum products to show",
          "info": "Out of stock products will not be shown."
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            {
              "value": "carousel",
              "label": "Carousel"
            },
            {
              "value": "list",
              "label": "List"
            }
          ],
          "default": "carousel"
        }
      ]
    },
    {
      "type": "richtext",
      "name": "Rich text",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Rich text"
        }
      ]
    },
    {
      "type": "share",
      "name": "Share",
      "limit": 1
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_weight",
          "label": "Show weight",
          "default": false
        }
      ]
    },
    {
      "type": "variant-picker",
      "name": "Variant picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "selector_style",
          "label": "Selector style",
          "info": "Swatches may not show as a dropdown, depending on the settings in Theme Settings > Swatches > Variant pickers.",
          "options": [
            {
              "value": "buttons",
              "label": "Buttons"
            },
            {
              "value": "dropdown",
              "label": "Dropdown"
            }
          ],
          "default": "buttons"
        },
        {
          "type": "checkbox",
          "id": "enable_dynamic_availability",
          "label": "Show availability in selectors",
          "default": true,
          "info": "Availability of variants will be shown in option selectors and update each time one is changed."
        },
        {
          "type": "checkbox",
          "id": "dynamic_availability_downwards",
          "label": "Update availability only in subsequent options",
          "info": "When an option is selected, options below it are updated to show their availability.",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_backorder_text",
          "label": "Show backorder text",
          "info": "Only shows for products which use Shopify inventory tracking and are available to purchase when out of stock.",
          "default": true
        },
        {
          "type": "header",
          "content": "Size chart"
        },
        {
          "type": "checkbox",
          "id": "enable_size_chart",
          "label": "Enable size chart",
          "default": false
        },
        {
          "type": "text",
          "id": "size_chart_variant",
          "label": "Option name",
          "info": "The label to show the link beside.",
          "default": "Size"
        },
        {
          "type": "page",
          "id": "size_chart_page",
          "label": "Page containing the size chart."
        }
      ]
    },
    {
      "type": "vendor-sku",
      "name": "Vendor / SKU / Barcode",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "Show vendor",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_sku",
          "label": "Show SKU",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_barcode",
          "label": "Show barcode",
          "info": " ISBN, UPC, etc",
          "default": false
        }
      ]
    },
    {
      "type": "type",
      "name": "Product type",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_stars",
          "label": "Show 5-star rating icon",
          "default": true
        },
        {
          "type": "text",
          "id": "reviews_text",
          "label": "Reviews Text",
          "default": "Hundreds of verified 5-star reviews"
        }
      ]
    },
    {
      "type": "message",
      "name": "Flash message",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "award",
              "label": "Award"
            },
            {
              "value": "box",
              "label": "Box"
            },
            {
              "value": "briefcase",
              "label": "Briefcase"
            },
            {
              "value": "calendar",
              "label": "Calendar"
            },
            {
              "value": "chat_bubble",
              "label": "Chat bubble"
            },
            {
              "value": "check_mark",
              "label": "Check mark"
            },
            {
              "value": "check_mark_in_circle",
              "label": "Check mark in circle"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "credit_card",
              "label": "Credit card"
            },
            {
              "value": "dollar_sign",
              "label": "Dollar sign"
            },
            {
              "value": "dryer",
              "label": "Dryer"
            },
            {
              "value": "email",
              "label": "Email"
            },
            {
              "value": "eye",
              "label": "Eye"
            },
            {
              "value": "feather",
              "label": "Feather"
            },
            {
              "value": "gift",
              "label": "Gift"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "iron",
              "label": "Iron"
            },
            {
              "value": "leaf",
              "label": "Leaf"
            },
            {
              "value": "leather",
              "label": "Leather"
            },
            {
              "value": "lock",
              "label": "Lock"
            },
            {
              "value": "map_pin",
              "label": "Map pin"
            },
            {
              "value": "pants",
              "label": "Pants"
            },
            {
              "value": "percent",
              "label": "Percent"
            },
            {
              "value": "phone",
              "label": "Phone"
            },
            {
              "value": "plane",
              "label": "Plane"
            },
            {
              "value": "price_tag",
              "label": "Price tag"
            },
            {
              "value": "question_mark",
              "label": "Question mark"
            },
            {
              "value": "return",
              "label": "Return"
            },
            {
              "value": "ruler",
              "label": "Ruler"
            },
            {
              "value": "scissors",
              "label": "Scissors"
            },
            {
              "value": "shirt",
              "label": "Shirt"
            },
            {
              "value": "shoe",
              "label": "Shoe"
            },
            {
              "value": "silhouette",
              "label": "Silhouette"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "truck",
              "label": "Truck"
            },
            {
              "value": "washing",
              "label": "Washing"
            }
          ],
          "default": "none"
        },
        {
          "type": "richtext",
          "id": "title",
          "label": "Message",
          "default": "<p>Product message</p>",
          "info": "Use metafields to have different messages per product. [Read more](https://cleancanvas.co.uk/support/enterprise/settings/custom-product-message)"
        },
        {
          "type": "select",
          "id": "close",
          "label": "Close button",
          "options": [
            {
              "value": "none",
              "label": "Not visible"
            },
            {
              "value": "once",
              "label": "Close this message"
            },
            {
              "value": "persistent",
              "label": "Close this message forever"
            }
          ],
          "default": "once"
        },
        {
          "type": "checkbox",
          "id": "show_over_media",
          "label": "Show over media",
          "default": false
        },
        {
          "type": "range",
          "id": "visibility_duration",
          "min": 3,
          "max": 15,
          "step": 1,
          "unit": "s",
          "label": "Seconds to show message",
          "info": "Only applies when the message shows over media.",
          "default": 7
        },
        {
          "type": "header",
          "content": "Style"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background",
          "default": "#e4edfa"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text",
          "default": "#1a66d2"
        }
      ]
    },
    {
      "type": "description",
      "name": "Description",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_as_collapsible_content",
          "label": "Show as collapsible content",
          "default": false
        },
        {
          "type": "header",
          "content": "Collapsible content"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "award",
              "label": "Award"
            },
            {
              "value": "box",
              "label": "Box"
            },
            {
              "value": "briefcase",
              "label": "Briefcase"
            },
            {
              "value": "calendar",
              "label": "Calendar"
            },
            {
              "value": "chat_bubble",
              "label": "Chat bubble"
            },
            {
              "value": "check_mark",
              "label": "Check mark"
            },
            {
              "value": "check_mark_in_circle",
              "label": "Check mark in circle"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "credit_card",
              "label": "Credit card"
            },
            {
              "value": "dollar_sign",
              "label": "Dollar sign"
            },
            {
              "value": "dryer",
              "label": "Dryer"
            },
            {
              "value": "email",
              "label": "Email"
            },
            {
              "value": "eye",
              "label": "Eye"
            },
            {
              "value": "feather",
              "label": "Feather"
            },
            {
              "value": "gift",
              "label": "Gift"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "iron",
              "label": "Iron"
            },
            {
              "value": "leaf",
              "label": "Leaf"
            },
            {
              "value": "leather",
              "label": "Leather"
            },
            {
              "value": "lock",
              "label": "Lock"
            },
            {
              "value": "map_pin",
              "label": "Map pin"
            },
            {
              "value": "pants",
              "label": "Pants"
            },
            {
              "value": "percent",
              "label": "Percent"
            },
            {
              "value": "phone",
              "label": "Phone"
            },
            {
              "value": "plane",
              "label": "Plane"
            },
            {
              "value": "price_tag",
              "label": "Price tag"
            },
            {
              "value": "question_mark",
              "label": "Question mark"
            },
            {
              "value": "return",
              "label": "Return"
            },
            {
              "value": "ruler",
              "label": "Ruler"
            },
            {
              "value": "scissors",
              "label": "Scissors"
            },
            {
              "value": "shirt",
              "label": "Shirt"
            },
            {
              "value": "shoe",
              "label": "Shoe"
            },
            {
              "value": "silhouette",
              "label": "Silhouette"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "truck",
              "label": "Truck"
            },
            {
              "value": "washing",
              "label": "Washing"
            }
          ],
          "default": "none"
        },
        {
          "type": "checkbox",
          "id": "open",
          "label": "Open by default",
          "default": false
        }
      ]
    },
    {
      "type": "product-labels",
      "name": "Product labels",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "See settings in \"Theme Settings > Product labels\"."
        }
      ]
    }
  ]
}
{% endschema %}
